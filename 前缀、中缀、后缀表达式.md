# 前缀、中缀、后缀表达式

## 概念和形式

#### 中缀表达式

平时我们编写运算表达式，例如 1 + 2 ，像这种**把运算符写在 两个数字中间的运算表达式，就被称为 中缀表达式。**

运算符中使用 乘除，例如：

1 + 2 * 3 + 4

1 + 2 * 3 / 4

运算符中使用 括号，例如：

1 + 2 * ( 3 + 4 )

( 1 + 2 ) * 3 - 4

...  

**中缀表达式最大一个特点是存在运算优先级：**

1. 优先运算括号里的内容
2. 优先运算乘除、再运算加减

因为小学时候学习过数学，所以你会很自然看懂、理解上面示例中的运算。

**中缀表达式对于计算机而言的运算复杂度**

对于计算机来说，运算是从左向右执行的，但是若存在 乘除、括号 这些会改变运算优先级的符号时，计算机是需要不断通过整体判断优先级，才能决定下一步如何运算的。

> 事实上计算机在执行我们日常编写的 中缀表达式时，都会先将其转化为 前缀表达式或后缀表达式后，再进行计算。



阅读至此，你应该基本理解 中缀表达式的形式、计算机理解并运算中缀表达式的复杂性。



那有没有一种表达式，不包含优先级，可以让计算机持续稳定的从左向右进行计算？

答：有，就是 前缀表达式 或 后缀表达式。



## 前缀表达式、后缀表达式

**把需要计算的数字用空格分隔开，将所有的运算符(加减乘除) 以逆序的形式放在数字前面，这种形式就是 前缀表达式。**

> 前缀表达式的发明者是波兰数学家卢卡西维奇，所以这种形式又被称为 波兰表达式

**把两个或多个需要计算的数字用空格分隔开，将运算符放在这两个或多个数字后面，这种形式就是 后缀表达式。**

> 后缀表达式与 前缀表达式相反，所以也被称为 逆波兰表达式



**特别提醒：前缀表达式和后缀表达式并不是简单以所有运算符在数字前还是数字后来区分的**

1. 前缀表达式中的运算符，全部逆序放在**所有数字前面**
2. 后缀表达式中只是将 **两个或多个(但不一定是全部)**，对应的数字运算符放到数字后面



**同一个运算的不同达式举例：**

假设有一个中缀表达式 ( 1 + 2 ) * 3 - 4，那么他对应的前缀表达式或后缀表达式是什么呢？

> 上面示例中只是为了方便阅读，所以才在表达式中添加了空格，实际为：(1+2)*3-4

对应的前缀表达式为：-*+ 1 2 3 4

对应的后缀表达式为：1 2 + 3 * 4 - 

> 千万不要以为你已经看懂并掌握了。

再来看一个更为复杂的运算：

中缀表示式为：a + b * c + ( d * e + f ) * g，对应的后缀表达式为：a b c * + d e * f + g * +

> 是不是已经懵了。



## 人脑换算法：将中缀表达式转后缀表达式

#### 换算步骤：

1. 第1步：将所有运算都加上括号
2. 第2步：将所有运算符放到括号后面
3. 第3步：去掉所有括号，得到的就是 后缀表达式



#### 举个例子：666

```
666 = 11 * 6 * 11

666 = (5+6)*6*(5+6)

第1步：将所有运算都加上括号 (((5+6)*6)*(5+6))
第2步：将所欲的运算符都放到括号后 (((5 6)+6)*(5 6)+)*
第3步：去掉所有括号，得到的就是对应后缀表达式 5 6 + 6 * 5 6 + *

最终得到的后缀表达式，严禁写法应该是运算符和数字应该不包含空格，即：5 6+6*5 6+*
```



## 计算机换算

计算机在将中缀表达式换算出前缀表达式或后缀表达式时，肯定并不是采用上面 上面人脑转换的方式，而是有一套标准、科学的方式。

由于过程复杂，牵扯到 栈、二叉树 的一些算法，具体详情可查看：

* 前缀，中缀，后缀表达式学习笔记：https://blog.michaelyin.info/prefix-infix-postfix-expression-1/
* 中缀表达式转换为后缀表达式：https://blog.csdn.net/sgbfblog/article/details/8001651
* JS使用栈结构将中缀表达式转化为后缀表达式并计算：https://www.cnblogs.com/tylerdonet/p/5816464.html



## 补充说明：i++、++i

**我们通常编写的 i++ 或 ++i 中的 ++ 属于特殊运算符。**

1. i++ 这种形式根本不是 后缀表达式
2. ++i 这种形式根本不是 前缀表达式



**i++：先计算表达式的值，再给 i + 1**

**++i：先给 i + 1，再计算表达式的值**

也就是说，i++ 和 ++i 的差别主要体现在执行顺序上。



**举例说明：**

```
let i = 0
let a = ++i + 0
console.log(i) // 1
console.log(a) // 1
```

> ++i 意味着 先执行 i = i + 1，再执行 a =  i + 0
>
> ```
> let a = ++i + 0
> 
> 执行顺序相当于：
> i = i + 1
> let a = i + 0
> 因此 a 最终值为 1
> ```



```
let i = 0
let b = i++ + 0
console.log(i) // 1
console.log(b) // 0
```

> i++ 意味着 先执行表达式  a =  i + 0，再执行 i = i + 1
>
> ```
> let b = i++ + 0
> 
> 执行顺序相当于：
> let b = i + 0
> i = i + 1
> 因此 b 最终值为 0
> ```



**请记得：无论哪种执行顺序，最终 i 都是会执行一次 i  = i + 1 的。**

